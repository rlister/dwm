* My dwm hacks

Guide here: https://dwm.suckless.org/customisation/patches_in_git/

** Updates

Merge upstream updates to [[https://dwm.suckless.org/][dwm]]:

#+begin_src sh
  git remote add upstream git://git.suckless.org/dwm
  git fetch upstream
  git checkout master
  git merge upstream/master
#+end_src

Merge updates into patch branch:

#+begin_src sh
  git checkout master
  git pull -v --all
  git checkout <branch>
  git rebase --preserve-merges master
  ... fix merge conflicts ...
  git rebase --continue
  git push origin
#+end_src

** Install

#+begin_src sh
  git checkout <branch>
  make
  sudo make install
#+end_src

** Test

#+begin_src sh
  startx -- /usr/bin/Xephyr -screen 2560x1440 :1
#+end_src

** Patches

*** noborder

- https://dwm.suckless.org/patches/noborder/

Remove border on single visible window, fixed version.

#+begin_src sh
  wget https://dwm.suckless.org/patches/noborder/dwm-noborderfloatingfix-6.2.diff
  git apply dwm-noborderfloatingfix-6.2.diff
#+end_src

*** three column

- https://dwm.suckless.org/patches/three-column/

Three-columns with centered master, for widescreen monitor.

#+begin_src sh
  wget https://dwm.suckless.org/patches/three-column/tcl.c
#+end_src

Replace =layout()= in =config.h=:

#+begin_src c
  #include "tcl.c"
  static Layout layout[] = {
          /* symbol               function */
          { "[T]", tile }, /* first entry is default */
          { "[F]", floating },
          { "[M]", monocle },
          { "[C]", Tcl },
  };
#+end_src

Add keybinding in =keys[]=:

#+begin_src c
  { MODKEY,                       XK_c,      setlayout,      {.v = &layouts[3]} },
#+end_src

*** classtitle

Modify first statement in =updatetitle()= to use short window CLASS
rather than full TITLE in the statusbar:

#+begin_src c
-	if (!gettextprop(c->win, netatom[NetWMName], c->name, sizeof c->name))
-		gettextprop(c->win, XA_WM_NAME, c->name, sizeof c->name);
+       gettextprop(c->win, XA_WM_CLASS, c->name, sizeof c->name);
#+end_src
